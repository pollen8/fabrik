/*! Fabrik */

!function(){var p,a,n=0,d=[],t={},o={},i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},r=/[<>&\"\']/g,g=window.setTimeout,s={};function l(){this.returnValue=!1}function u(){this.cancelBubble=!0}!function(e){var t,n,i,r="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,pptx xlsx,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,text/csv,csv,text/plain,asc txt text diff log,application/octet-stream,exe rvt,application/dwg,dwg,application/x-3ds,3ds,application/x-paperport,max".split(/,/);for(t=0;t<r.length;t+=2)for(i=r[t+1].split(/ /),n=0;n<i.length;n++)o[i[n]]=r[t]}();var e,c,f,m,h,v,E={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:o,ua:(m=navigator,h=m.userAgent,v=m.vendor,f=(e=/WebKit/.test(h))&&-1!==v.indexOf("Apple"),c=window.opera&&window.opera.buildNumber,{windows:-1!==navigator.platform.indexOf("Win"),ie:!e&&!c&&/MSIE/gi.test(h)&&/Explorer/gi.test(m.appName),webkit:e,gecko:!e&&/Gecko/.test(h),safari:f,opera:!!c}),extend:function(n){return E.each(arguments,function(e,t){0<t&&E.each(e,function(e,t){n[t]=e})}),n},cleanName:function(e){var t,n;for(n=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<n.length;t+=2)e=e.replace(n[t],n[t+1]);return e=(e=e.replace(/\s+/g,"_")).replace(/[^a-z0-9_\-\.]+/gi,"")},addRuntime:function(e,t){return t.name=e,d[e]=t,d.push(t),t},guid:function(){var e,t=(new Date).getTime().toString(32);for(e=0;e<5;e++)t+=Math.floor(65535*Math.random()).toString(32);return(E.guidPrefix||"p")+t+(n++).toString(32)},buildUrl:function(e,t){var n="";return E.each(t,function(e,t){n+=(n?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),n&&(e+=(0<e.indexOf("?")?"&":"?")+n),e},each:function(e,t){var n,i,r;if(e)if((n=e.length)===p){for(i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))return}else for(r=0;r<n;r++)if(!1===t(e[r],r))return},formatSize:function(e){return e===p||/\D/.test(e)?E.translate("N/A"):1073741824<e?Math.round(e/1073741824,1)+" GB":1048576<e?Math.round(e/1048576,1)+" MB":1024<e?Math.round(e/1024,1)+" KB":e+" b"},getPos:function(e,t){var n,i,r,o=0,a=0,s=document;function l(e){var t,n,i=0,r=0;return e&&(n=e.getBoundingClientRect(),t="CSS1Compat"===s.compatMode?s.documentElement:s.body,i=n.left+t.scrollLeft,r=n.top+t.scrollTop),{x:i,y:r}}if(e=e,t=t||s.body,e&&e.getBoundingClientRect&&0<navigator.userAgent.indexOf("MSIE")&&8!==s.documentMode)return i=l(e),r=l(t),{x:i.x-r.x,y:i.y-r.y};for(n=e;n&&n!=t&&n.nodeType;)o+=n.offsetLeft||0,a+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!=t&&n.nodeType;)o-=n.scrollLeft||0,a-=n.scrollTop||0,n=n.parentNode;return{x:o,y:a}},getSize:function(e){return{w:e.offsetWidth||e.clientWidth,h:e.offsetHeight||e.clientHeight}},parseSize:function(e){var t;return"string"==typeof e&&(t=(e=/^([0-9]+)([mgk]?)$/.exec(e.toLowerCase().replace(/[^0-9mkg]/g,"")))[2],e=+e[1],"g"==t&&(e*=1073741824),"m"==t&&(e*=1048576),"k"==t&&(e*=1024)),e},xmlEncode:function(e){return e?(""+e).replace(r,function(e){return i[e]?"&"+i[e]+";":e}):e},toArray:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n},addI18n:function(e){return E.extend(t,e)},translate:function(e){return t[e]||e},isEmptyObj:function(e){if(e===p)return!0;for(var t in e)return!1;return!0},hasClass:function(e,t){return""!=e.className&&new RegExp("(^|\\s+)"+t+"(\\s+|$)").test(e.className)},addClass:function(e,t){E.hasClass(e,t)||(e.className=""==e.className?t:e.className.replace(/\s+$/,"")+" "+t)},removeClass:function(e,t){var n=new RegExp("(^|\\s+)"+t+"(\\s+|$)");e.className=e.className.replace(n,function(e,t,n){return" "===t&&" "===n?" ":""})},getStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void 0},addEvent:function(e,t,n){var i,r,o;o=arguments[3],t=t.toLowerCase(),a===p&&(a="Plupload_"+E.guid()),e.addEventListener?(i=n,e.addEventListener(t,i,!1)):e.attachEvent&&(i=function(){var e=window.event;e.target||(e.target=e.srcElement),e.preventDefault=l,e.stopPropagation=u,n(e)},e.attachEvent("on"+t,i)),e[a]===p&&(e[a]=E.guid()),s.hasOwnProperty(e[a])||(s[e[a]]={}),(r=s[e[a]]).hasOwnProperty(t)||(r[t]=[]),r[t].push({func:i,orig:n,key:o})},removeEvent:function(t,e){var n,i,r;if("function"==typeof arguments[2]?i=arguments[2]:r=arguments[2],e=e.toLowerCase(),t[a]&&s[t[a]]&&s[t[a]][e]){for(var o=(n=s[t[a]][e]).length-1;0<=o&&(n[o].key!==r&&n[o].orig!==i||(t.detachEvent?t.detachEvent("on"+e,n[o].func):t.removeEventListener&&t.removeEventListener(e,n[o].func,!1),n[o].orig=null,n[o].func=null,n.splice(o,1),i===p));o--);if(n.length||delete s[t[a]][e],E.isEmptyObj(s[t[a]])){delete s[t[a]];try{delete t[a]}catch(e){t[a]=p}}}},removeAllEvents:function(n){var i=arguments[1];n[a]!==p&&n[a]&&E.each(s[n[a]],function(e,t){E.removeEvent(n,t,i)})}};E.Uploader=function(l){var n,i,r={},u=[];function c(){var e,t,n=0;if(this.state==E.STARTED){for(t=0;t<u.length;t++)e||u[t].status!=E.QUEUED?n++:((e=u[t]).status=E.UPLOADING,this.trigger("BeforeUpload",e)&&this.trigger("UploadFile",e));n==u.length&&(this.stop(),this.trigger("UploadComplete",u))}}function f(){var e,t;for(n.reset(),e=0;e<u.length;e++)(t=u[e]).size!==p?(n.size+=t.size,n.loaded+=t.loaded):n.size=p,t.status==E.DONE?n.uploaded++:t.status==E.FAILED?n.failed++:n.queued++;n.size===p?n.percent=0<u.length?Math.ceil(n.uploaded/u.length*100):0:(n.bytesPerSec=Math.ceil(n.loaded/((+new Date-i||1)/1e3)),n.percent=0<n.size?Math.ceil(n.loaded/n.size*100):0)}n=new E.QueueProgress,l=E.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},l),E.extend(this,{state:E.STOPPED,runtime:"",features:{},files:u,settings:l,total:n,id:E.guid(),init:function(){var t,o,e,s=this,a=0;if("function"==typeof l.preinit?l.preinit(s):E.each(l.preinit,function(e,t){s.bind(t,e)}),l.page_url=l.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(l.url)||(l.url=l.page_url+l.url),l.chunk_size=E.parseSize(l.chunk_size),l.max_file_size=E.parseSize(l.max_file_size),s.bind("FilesAdded",function(e,t){var n,i,r,o=0,a=l.filters;for(a&&a.length&&(r=[],E.each(a,function(e){E.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?r.push("\\.*"):r.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),r=new RegExp(r.join("|")+"$","i")),n=0;n<t.length;n++)(i=t[n]).loaded=0,i.percent=0,i.status=E.QUEUED,!r||r.test(i.name)?i.size!==p&&i.size>l.max_file_size?e.trigger("Error",{code:E.FILE_SIZE_ERROR,message:E.translate("File size error."),file:i}):(u.push(i),o++):e.trigger("Error",{code:E.FILE_EXTENSION_ERROR,message:E.translate("File extension error."),file:i});if(!o)return!1;g(function(){s.trigger("QueueChanged"),s.refresh()},1)}),l.unique_names&&s.bind("UploadFile",function(e,t){var n=t.name.match(/\.([^.]+)$/),i="tmp";n&&(i=n[1]),t.target_name=t.id+"."+i}),s.bind("UploadProgress",function(e,t){t.percent=0<t.size?Math.ceil(t.loaded/t.size*100):100,f()}),s.bind("StateChanged",function(e){if(e.state==E.STARTED)i=+new Date;else if(e.state==E.STOPPED)for(t=e.files.length-1;0<=t;t--)e.files[t].status==E.UPLOADING&&(e.files[t].status=E.QUEUED,f())}),s.bind("QueueChanged",f),s.bind("Error",function(e,t){t.file&&(t.file.status=E.FAILED,f(),e.state==E.STARTED&&g(function(){c.call(s)},1))}),s.bind("FileUploaded",function(e,t){t.status=E.DONE,t.loaded=t.size,e.trigger("UploadProgress",t),g(function(){c.call(s)},1)}),l.runtimes)for(o=[],e=l.runtimes.split(/\s?,\s?/),t=0;t<e.length;t++)d[e[t]]&&o.push(d[e[t]]);else o=d;!function t(){var n,e,i,r=o[a++];if(r){if(n=r.getFeatures(),e=s.settings.required_features)for(e=e.split(","),i=0;i<e.length;i++)if(!n[e[i]])return void t();r.init(s,function(e){e&&e.success?(s.features=n,s.runtime=r.name,s.trigger("Init",{runtime:r.name}),s.trigger("PostInit"),s.refresh()):t()})}else s.trigger("Error",{code:E.INIT_ERROR,message:E.translate("Init error.")})}(),"function"==typeof l.init?l.init(s):E.each(l.init,function(e,t){s.bind(t,e)})},refresh:function(){this.trigger("Refresh")},start:function(){this.state!=E.STARTED&&(this.state=E.STARTED,this.trigger("StateChanged"),c.call(this))},stop:function(){this.state!=E.STOPPED&&(this.state=E.STOPPED,this.trigger("StateChanged"))},getFile:function(e){var t;for(t=u.length-1;0<=t;t--)if(u[t].id===e)return u[t]},removeFile:function(e){var t;for(t=u.length-1;0<=t;t--)if(u[t].id===e.id)return this.splice(t,1)[0]},splice:function(e,t){var n;return n=u.splice(e===p?0:e,t===p?u.length:t),this.trigger("FilesRemoved",n),this.trigger("QueueChanged"),n},trigger:function(e){var t,n,i=r[e.toLowerCase()];if(i)for((n=Array.prototype.slice.call(arguments))[0]=this,t=0;t<i.length;t++)if(!1===i[t].func.apply(i[t].scope,n))return!1;return!0},hasEventListener:function(e){return!!r[e.toLowerCase()]},bind:function(e,t,n){var i;e=e.toLowerCase(),(i=r[e]||[]).push({func:t,scope:n||this}),r[e]=i},unbind:function(e){e=e.toLowerCase();var t,n=r[e],i=arguments[1];if(n){if(i!==p){for(t=n.length-1;0<=t;t--)if(n[t].func===i){n.splice(t,1);break}}else n=[];n.length||delete r[e]}},unbindAll:function(){var n=this;E.each(r,function(e,t){n.unbind(t)})},destroy:function(){this.trigger("Destroy"),this.unbindAll()}})},E.File=function(e,t,n){var i=this;i.id=e,i.name=t,i.size=n,i.loaded=0,i.percent=0,i.status=0},E.Runtime=function(){this.getFeatures=function(){},this.init=function(e,t){}},E.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},E.runtimes={},window.plupload=E}();